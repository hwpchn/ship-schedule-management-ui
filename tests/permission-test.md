# 权限管理系统测试用例

## 测试目标
验证基于角色的权限控制（RBAC）系统的完整功能，包括用户管理、角色管理、权限管理和权限校验。

## 测试环境
- 前端：Vue3 + Element Plus + Pinia
- 开发服务器：localhost:3000
- API服务器：localhost:8000 (代理配置)

## 测试场景

### 1. 登录权限验证
- **测试用例**: 使用不同角色的用户登录
- **预期结果**: 
  - 超级管理员：可以访问所有管理功能
  - 普通管理员：只能访问部分管理功能
  - 普通用户：只能看到基础功能

### 2. 路由权限保护
- **测试用例**: 直接访问管理页面URL
- **预期结果**: 
  - 有权限：正常访问页面
  - 无权限：重定向到Dashboard
  - 未登录：重定向到登录页

### 3. UI权限显示
- **测试用例**: 检查菜单和按钮的权限控制
- **预期结果**: 
  - 只显示用户有权限的功能入口
  - 无权限的按钮和菜单项不显示

### 4. 角色管理功能
- **测试用例**: 创建、编辑、删除角色
- **测试步骤**:
  1. 进入角色管理页面
  2. 点击"新建角色"
  3. 填写角色信息并选择权限
  4. 保存角色
  5. 编辑已有角色
  6. 删除角色
- **预期结果**: 
  - 角色CRUD操作正常
  - 权限树正确显示和选择
  - 数据实时更新

### 5. 用户角色分配
- **测试用例**: 为用户分配和修改角色
- **测试步骤**:
  1. 进入用户管理页面
  2. 点击"分配角色"
  3. 选择用户角色
  4. 保存配置
- **预期结果**: 
  - 用户角色正确分配
  - 角色变更立即生效
  - 界面显示更新

### 6. 权限树展示
- **测试用例**: 查看系统权限结构
- **测试步骤**:
  1. 进入权限管理页面
  2. 查看权限分类和详情
  3. 搜索和筛选权限
  4. 展开/收起权限树
- **预期结果**: 
  - 权限树结构清晰
  - 搜索筛选功能正常
  - 当前用户权限状态正确显示

## 测试数据

### 测试用户
```json
{
  "super_admin": {
    "email": "admin@example.com",
    "password": "admin123",
    "roles": ["超级管理员"]
  },
  "normal_admin": {
    "email": "manager@example.com", 
    "password": "manager123",
    "roles": ["普通管理员"]
  },
  "normal_user": {
    "email": "user@example.com",
    "password": "user123", 
    "roles": ["普通用户"]
  }
}
```

### 测试角色
```json
{
  "test_role": {
    "name": "测试角色",
    "description": "用于测试的角色",
    "permissions": ["user.list", "role.list"]
  }
}
```

## 验证要点

### 前端功能
- [x] 路由权限守卫正常工作
- [x] 菜单权限控制正确
- [x] 按钮权限显示适当
- [x] 权限树组件功能完整
- [x] 表单验证和错误处理

### 用户体验
- [x] 界面响应式设计
- [x] 加载状态显示
- [x] 错误提示友好
- [x] 操作反馈及时
- [x] 中文界面完整

### 数据交互
- [x] API请求正确发送
- [x] 响应数据正确处理
- [x] 错误处理机制完善
- [x] 权限验证逻辑正确

## 注意事项

1. **安全性**: 前端权限控制仅用于用户体验，真正的安全控制在后端
2. **性能**: 权限数据缓存在前端，减少重复请求
3. **可维护性**: 权限代码统一管理，便于扩展
4. **用户体验**: 权限不足时给出友好提示，而非报错

## 测试命令

```bash
# 启动开发服务器
pnpm dev

# 运行在 http://localhost:3000
# API代理到 http://localhost:8000/api
```

## 测试结果记录

请在实际测试时记录：
- 测试时间：
- 测试人员：
- 发现问题：
- 解决方案：
- 测试状态：✅通过 / ❌失败 